<!doctype html>
<html class="no-js" lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>bug智能分类 </title>
    <link rel="stylesheet" href="/static/css/responsive.dataTables.min.css">
    <link rel="stylesheet" href="/static/css/dataTables.bootstrap5.min.css">
    <link rel="stylesheet" href="/static/css/ihealth.style.min.css">
</head>
<body>

<div id="ihealth-layout" class="theme-tradewind">            
    <div class="main px-lg-4 px-md-4">     
        <div class="body d-flex py-lg-3 py-md-2">
            <div class="container-xxl">
                <div class="row align-items-center">
                    <div class="border-0 mb-4">
                        <div class="card-header py-3 no-bg bg-transparent d-flex align-items-center px-0 justify-content-between border-bottom flex-wrap">
                            <h3 class="fw-bold py-3 mb-0">BUG 智能分类</h3>
                        </div>
                    </div>
                </div> 
                <div class="tab-content">
                    <div class="tab-pane fade show active" id="list-view">
                        <div class="row clearfix g-3">
                            <div class="col-lg-4">
                                <div class="card">
                                    <div class="card-header py-3 d-flex justify-content-between bg-transparent border-bottom-0">
                                        <h6 class="mb-0 fw-bold ">请输入bug report内容</h6>
                                    </div>
                                    <div class="card-body">
                                        <form action="">
                                            <div class="row g-3 mb-3">                     
                                                <div class="col-md-12">
                                                    <textarea class="form-control" id="addnote" rows="3"></textarea> 
                                                </div>
                                            </div>
                                            <div class="row g-3 mb-3">
                                            </div>
                                            <button type="submit" class="btn btn-primary" id="btn_addnote">提交</button>
                                        </form>
                                    </div>
                                    <!-- <div class="card-header py-3 d-flex justify-content-between bg-transparent border-bottom-0">
                                        <h6 class="mb-0 fw-bold ">预测的分类标签</h6>
                                    </div> -->

                                    

                                    <!-- <div class="card-body">
                                        <div class="col-md-6">
                                            <input type="text" class="form-control" id="firstname" required="">
                                        </div>
                                    </div> -->
                                </div>
                            </div>
                            <div class="col-lg-8">
                                <div class="card mb-3">
                                    <div class="card-body">
                                        <table id="myProjectTable" class="table table-hover align-middle mb-0" style="width:100%">
                                            <thead>
                                                <tr>
                                                    <th>用户名</th> 
                                                    <th>分类ID</th>
                                                    <th>bug report</th>
                                                    <th>预测分类标签</th> 
                                                    <th>日期</th>   
                                                    
                                                    <th>操作</th>  
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {{range .bugPre}}
                                                <tr>
                                                <td>
                                                    <img class="avatar rounded-circle" src="{{.Img}}" alt="">
                                                    <span class="fw-bold ms-1">{{.Username}}</span>
                                                </td>
                                         
                                                
                                                <td>
                                                    {{.Bug.Id}}
                                                </td>
                                                <td style="white-space:nowrap; text-overflow: ellipsis; overflow: hidden;" title="{{.Bug.BugReport}}">
                                                        {{.BugSimple}}
                                                </td>
                                                <td>{{.Bug.PredictBug}}</td>
                                                <td>{{.Bug.Date}}</td>
                                                    <td>
                                                        <div class="btn-group" role="group" aria-label="Basic outlined example">
                                                            <button type="button" class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#expedit"><i class="icofont-edit text-success"></i></button>
                                                            <button type="button" class="btn btn-outline-secondary deleterow"><i class="icofont-ui-delete text-danger"></i></button>
                                                        </div>
                                                    </td>
                                                </tr>
                                                {{end}}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
        

        <!-- Edit Contact-->
        <div class="modal fade" id="expedit" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-md modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title  fw-bold" id="expeditLabel"> Edit Contact</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="item1" class="form-label">Person Name</label>
                        <input type="text" class="form-control" id="item1" value="Phil Glover"> 
                    </div>
                    <div class="deadline-form">
                        <form>
                            <div class="row g-3 mb-3">
                              <div class="col-sm-6">
                                <label class="form-label">Contact Image</label>
                                <input type="file" class="form-control">
                              </div>
                              <div class="col-sm-6">
                                <label for="abc1" class="form-label">Birthdate</label>
                                <input type="date" class="form-control" id="abc1" value="2021-03-12">
                              </div>
                            </div>
                            <div class="row g-3 mb-3">
                                <div class="col-sm-6">
                                    <label for="deptwo1" class="form-label">Email</label>
                                    <input type="email" class="form-control" id="deptwo1" value="PhilGlover@gmail.com">
                                </div>
                                <div class="col-sm-6">
                                    <label class="form-label">Phone</label>
                                    <input type="text" class="form-control" value="775-555-0117">
                                </div>
                              </div>
                        </form>
                    </div>
                    
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Done</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </div>
            </div>
        </div>
    </div>     
</div>
 
<script src="/static/script/libscripts.bundle.js"></script>
<script src="/static/script/dataTables.bundle.js"></script>
<script src="/static/script/template.js"></script>
<script>
    $(function(){
        $("#btn_addnote").click(function(){
            var addnote=document.getElementById("addnote").value;
            var formData=new FormData;
            formData.append("bugReport",addnote);
            $.ajax({
                type:"post",
                url:"/bugPrediction",
                data:formData,
                cache:false,
                async:false,
                processData: false,
                contentType: false,
                success:function(res) {
                    $("#predict").text(res["predict"])
                    // document.getElementById("predict").value  = res["predict"];        
                    // alert(res["predict"])           
                }
            })
        })
    })
    $(document).ready(function() {
        $('#myProjectTable')
        .addClass( 'nowrap' )
        .dataTable( {
            responsive: true,
            columnDefs: [
                { targets: [-1, -3], className: 'dt-body-right' }
            ]
        });
    });
</script>
</body>
</html>